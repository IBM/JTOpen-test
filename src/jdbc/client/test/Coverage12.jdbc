!ECHOCOMMAND true
!PRINTSTACKTRACE false
-- Testcase to test the coverage of the built in JDBC client
-- Testcase for call tests

-- setup 

!SILENT:DROP PROCEDURE COLLECTION.CLOBIO
!SILENT:DROP PROCEDURE COLLECTION.CLOBIO1
!SILENT:DROP PROCEDURE COLLECTION.BLOBIO
!SILENT:DROP PROCEDURE COLLECTION.BLOBIO1
!SILENT:DROP PROCEDURE COLLECTION.SUM3
!SILENT: drop procedure COLLECTION.sysdummy3
!SILENT:DROP PROCEDURE COLLECTION.GOBIGINTL
!SILENT:DROP PROCEDURE COLLECTION.GOVARCHARL
!SILENT:DROP PROCEDURE COLLECTION.GODECIMALL
!SILENT:DROP PROCEDURE COLLECTION.GODATEL
!SILENT:DROP PROCEDURE COLLECTION.GOTIMEL
!SILENT:DROP PROCEDURE COLLECTION.GOTSL
!SILENT:DROP PROCEDURE COLLECTION.GOBLOBL
!SILENT:DROP PROCEDURE COLLECTION.GOCLOBL
!SILENT:DROP PROCEDURE COLLECTION.GOINTL
!SILENT:DROP PROCEDURE COLLECTION.GOSML
!SILENT:DROP PROCEDURE COLLECTION.GOFLOATL
!SILENT:DROP PROCEDURE COLLECTION.GODOUBLEL
!SILENT:DROP PROCEDURE COLLECTION.GOVBL

!SILENT:DROP TYPE      COLLECTION.BIGINTL
DROP TYPE      COLLECTION.VARCHARL
!SILENT:DROP TYPE      COLLECTION.DECIMALL
!SILENT:DROP TYPE      COLLECTION.DATEL
!SILENT:DROP TYPE      COLLECTION.TIMEL
!SILENT:DROP TYPE      COLLECTION.TSL
!SILENT:DROP TYPE      COLLECTION.BLOBL
!SILENT:DROP TYPE      COLLECTION.CLOBL
!SILENT:DROP TYPE      COLLECTION.INTL
!SILENT:DROP TYPE      COLLECTION.SML
!SILENT:DROP TYPE      COLLECTION.FLOATL
!SILENT:DROP TYPE      COLLECTION.DOUBLEL
!SILENT:DROP TYPE      COLLECTION.VBL


CREATE PROCEDURE COLLECTION.CLOBIO(IN I CLOB(1M) CCSID 37, OUT O CLOB(1M) CCSID 37) LANGUAGE SQL BEGIN SET O=I; END
CREATE PROCEDURE COLLECTION.CLOBIO1(INOUT I CLOB(1M) CCSID 37) LANGUAGE SQL BEGIN SET I=I CONCAT I; END

CREATE PROCEDURE COLLECTION.SUM3(OUT O INT, IN P1 INT, IN P2 INT, IN P3 INT) LANGUAGE SQL BEGIN SET O=P1+P2+P3; END



CREATE PROCEDURE COLLECTION.BLOBIO(IN I BLOB(1M), OUT O BLOB(1M) ) LANGUAGE SQL BEGIN SET O=I; END
CREATE PROCEDURE COLLECTION.BLOBIO1(INOUT I BLOB(1M) ) LANGUAGE SQL BEGIN SET I=I CONCAT I; END


CREATE PROCEDURE COLLECTION.SYSDUMMY3() RESULT SETS 3 LANGUAGE SQL  BEGIN   DECLARE c1 CURSOR FOR SELECT '1' from SYSIBM.SYSDUMMY1; DECLARE c2 CURSOR FOR SELECT '2' from SYSIBM.SYSDUMMY1; DECLARE c3 CURSOR FOR SELECT '3' from SYSIBM.SYSDUMMY1;  OPEN c1 ; OPEN c2 ;   OPEN c3 ;    SET RESULT SETS CURSOR c1, CURSOR c2, CURSOR c3; END 


CREATE TYPE      COLLECTION.BIGINTL AS BIGINT ARRAY[11]
CREATE TYPE      COLLECTION.VARCHARL AS VARCHAR(80) ARRAY[11]
CREATE TYPE      COLLECTION.DECIMALL AS DECIMAL(10,2) ARRAY[11]
CREATE TYPE      COLLECTION.DATEL AS DATE ARRAY[11]
CREATE TYPE      COLLECTION.TIMEL AS TIME ARRAY[11]
CREATE TYPE      COLLECTION.TSL AS TIMESTAMP ARRAY[11]
CREATE TYPE      COLLECTION.BLOBL AS BLOB(100) ARRAY[11]
CREATE TYPE      COLLECTION.CLOBL AS CLOB(100) ARRAY[11]
CREATE TYPE      COLLECTION.INTL AS INT ARRAY[11]
CREATE TYPE      COLLECTION.SML AS SMALLINT ARRAY[11]
CREATE TYPE      COLLECTION.FLOATL AS FLOAT ARRAY[11]
CREATE TYPE      COLLECTION.DOUBLEL AS DOUBLE ARRAY[11]
CREATE TYPE      COLLECTION.VBL AS VARBINARY(20) ARRAY[11]


CREATE PROCEDURE COLLECTION.GOBIGINTL(IN ARRAYIN COLLECTION.BIGINTL, OUT ARRAYOUT COLLECTION.BIGINTL)  LANGUAGE SQL BEGIN SET ARRAYOUT=ARRAYIN; END


CREATE PROCEDURE COLLECTION.GOVARCHARL(IN ARRAYIN COLLECTION.VARCHARL, OUT ARRAYOUT COLLECTION.VARCHARL) LANGUAGE SQL BEGIN SET ARRAYOUT=ARRAYIN; END

CREATE PROCEDURE COLLECTION.GODECIMALL(IN ARRAYIN COLLECTION.DECIMALL, OUT ARRAYOUT COLLECTION.DECIMALL) LANGUAGE SQL BEGIN SET ARRAYOUT=ARRAYIN; END

CREATE PROCEDURE COLLECTION.GODATEL(IN ARRAYIN COLLECTION.DATEL, OUT ARRAYOUT COLLECTION.DATEL) LANGUAGE SQL BEGIN SET ARRAYOUT=ARRAYIN; END

CREATE PROCEDURE COLLECTION.GOTIMEL(IN ARRAYIN COLLECTION.TIMEL, OUT ARRAYOUT COLLECTION.TIMEL) LANGUAGE SQL BEGIN SET ARRAYOUT=ARRAYIN; END

CREATE PROCEDURE COLLECTION.GOTSL(IN ARRAYIN COLLECTION.TSL, OUT ARRAYOUT COLLECTION.TSL) LANGUAGE SQL BEGIN SET ARRAYOUT=ARRAYIN; END

CREATE PROCEDURE COLLECTION.GOBLOBL(IN ARRAYIN COLLECTION.BLOBL, OUT ARRAYOUT COLLECTION.BLOBL) LANGUAGE SQL BEGIN SET ARRAYOUT=ARRAYIN; END

CREATE PROCEDURE COLLECTION.GOCLOBL(IN ARRAYIN COLLECTION.CLOBL, OUT ARRAYOUT COLLECTION.CLOBL) LANGUAGE SQL BEGIN SET ARRAYOUT=ARRAYIN; END

CREATE PROCEDURE COLLECTION.GOINTL(IN ARRAYIN COLLECTION.INTL, OUT ARRAYOUT COLLECTION.INTL) LANGUAGE SQL BEGIN SET ARRAYOUT=ARRAYIN; END

CREATE PROCEDURE COLLECTION.GOSML(IN ARRAYIN COLLECTION.SML, OUT ARRAYOUT COLLECTION.SML) LANGUAGE SQL BEGIN SET ARRAYOUT=ARRAYIN; END

CREATE PROCEDURE COLLECTION.GOFLOATL(IN ARRAYIN COLLECTION.FLOATL, OUT ARRAYOUT COLLECTION.FLOATL) LANGUAGE SQL BEGIN SET ARRAYOUT=ARRAYIN; END

CREATE PROCEDURE COLLECTION.GODOUBLEL(IN ARRAYIN COLLECTION.DOUBLEL, OUT ARRAYOUT COLLECTION.DOUBLEL) LANGUAGE SQL BEGIN SET ARRAYOUT=ARRAYIN; END

CREATE PROCEDURE COLLECTION.GOVBL(IN ARRAYIN COLLECTION.VBL, OUT ARRAYOUT COLLECTION.VBL) LANGUAGE SQL BEGIN SET ARRAYOUT=ARRAYIN; END





-- Tests

CALL COLLECTION.CLOBIO(?,?) -- INPARM HI
CALL COLLECTION.CLOBIO(?,?) -- INPARM HI
CALL COLLECTION.CLOBIO(?,?) -- INPARM HI2

CALL COLLECTION.CLOBIO1(?) -- INPARM HI


CALL COLLECTION.BLOBIO(?,?) -- INPARM X'f1f2'
CALL COLLECTION.BLOBIO1(?) -- INPARM X'f1f2'
CALL COLLECTION.BLOBIO1(?) -- INPARM GEN_BYTE_ARRAY+16384

CALL COLLECTION.GOBIGINTL(?,?) -- INPARM SQLARRAY[long:1:2:3:4]
CALL COLLECTION.GOVARCHARL(?,?) -- INPARM SQLARRAY[String:a:b:c]
CALL COLLECTION.GODECIMALL(?,?) -- INPARM SQLARRAY[BigDecimal:1.2:2.3:3.4]
CALL COLLECTION.GODATEL(?,?) -- INPARM SQLARRAY[Date:1999-03-04:2014-03-02:2011-09-30]
CALL COLLECTION.GOTIMEL(?,?) -- INPARM SQLARRAY[Time:11:00:00 12:00:00 7:08:23]
CALL COLLECTION.GOTSL(?,?) -- INPARM SQLARRAY[Timestamp:1999-03-04 11:22:332353|2031-03-04 11:22:332353|2019-03-04 11:22:332353]
CALL COLLECTION.GOBLOBL(?,?) -- INPARM SQLARRAY[Blob:1234:3452:4293]
CALL COLLECTION.GOCLOBL(?,?) -- INPARM SQLARRAY[Clob:clob1:clob2:clob3]
CALL COLLECTION.GOINTL(?,?) -- INPARM SQLARRAY[int:1:2:3]
CALL COLLECTION.GOSML(?,?) -- INPARM SQLARRAY[short:1:2:3]
CALL COLLECTION.GOFLOATL(?,?) -- INPARM SQLARRAY[float:1.0:2.0:3.0]
CALL COLLECTION.GODOUBLEL(?,?) -- INPARM SQLARRAY[double:1.0:2.0:3.4]
CALL COLLECTION.GOVBL(?,?) -- INPARM SQLARRAY[byteArray:001122:334455:667788]



-- error case
CALL COLLECTION.BLOBIO1(?)

CALL COLLECTION.SUM3(?,?,?,?) -- INPARM 1,2,3


-- cleanup 
DROP PROCEDURE COLLECTION.CLOBIO
DROP PROCEDURE COLLECTION.CLOBIO1
DROP PROCEDURE COLLECTION.BLOBIO
DROP PROCEDURE COLLECTION.BLOBIO1
DROP PROCEDURE COLLECTION.SUM3
drop procedure COLLECTION.sysdummy3


DROP PROCEDURE COLLECTION.GOBIGINTL
DROP PROCEDURE COLLECTION.GOVARCHARL
DROP PROCEDURE COLLECTION.GODECIMALL
DROP PROCEDURE COLLECTION.GODATEL
DROP PROCEDURE COLLECTION.GOTIMEL
DROP PROCEDURE COLLECTION.GOTSL
DROP PROCEDURE COLLECTION.GOBLOBL
DROP PROCEDURE COLLECTION.GOCLOBL
DROP PROCEDURE COLLECTION.GOINTL
DROP PROCEDURE COLLECTION.GOSML
DROP PROCEDURE COLLECTION.GOFLOATL
DROP PROCEDURE COLLECTION.GODOUBLEL
DROP PROCEDURE COLLECTION.GOVBL

DROP TYPE      COLLECTION.BIGINTL
DROP TYPE      COLLECTION.VARCHARL
DROP TYPE      COLLECTION.DECIMALL
DROP TYPE      COLLECTION.DATEL
DROP TYPE      COLLECTION.TIMEL
DROP TYPE      COLLECTION.TSL
DROP TYPE      COLLECTION.BLOBL
DROP TYPE      COLLECTION.CLOBL
DROP TYPE      COLLECTION.INTL
DROP TYPE      COLLECTION.SML
DROP TYPE      COLLECTION.FLOATL
DROP TYPE      COLLECTION.DOUBLEL
DROP TYPE      COLLECTION.VBL
